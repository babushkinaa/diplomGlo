!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t="+7 (___) ___-__-__"){const n=document.querySelector(e);function r(e){const n=e.keyCode,r=t,o=r.replace(/\D/g,""),s=this.value.replace(/\D/g,"");let i=0,a=r.replace(/[_\d]/g,(function(e){return i<s.length?s.charAt(i++)||o.charAt(i):e}));i=a.indexOf("_"),-1!=i&&(a=a.slice(0,i));let l=r.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");l=new RegExp("^"+l+"$"),(!l.test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=a),"blur"==e.type&&this.value.length<5&&(this.value="")}n.addEventListener("input",r),n.addEventListener("focus",r),n.addEventListener("blur",r)}n.r(t);class o{constructor({selector:e,pattern:t={},method:n}){this.form=document.querySelector(e),this.pattern=t,this.method=n,this.elementsForm=[...this.form.elements].filter(e=>"button"!==e.tagName.toLowerCase()&&"button"!==e.type.toLowerCase()),this.error=new Set}init(){this.applyStyle(),this.elementsForm.forEach(e=>e.addEventListener("change",this.checkIt.bind(this))),this.setPattern(),this.form.addEventListener("submit",e=>{this.error.size?e.preventDefault():this.elementsForm.forEach(e=>{this.checkIt({target:e})})})}isValid(e){const t={notEmpty:e=>""!==e.value.trim(),pattern:(e,t)=>t.test(e.value)};if(this.method){const n=this.method[e.id];if(n)return n.every(n=>t[n[0]](e,this.pattern[n[1]]));console.warn("необходимо передать id  и методы проверки для этих полей, валидация всегда true")}return!0}checkIt(e){const t=e.target;this.isValid(t)?(this.showSuccess(t),this.error.delete(t)):(this.showError(t),this.error.add(t))}showError(e){if(e.classList.remove("success"),e.classList.add("error"),e.nextElementSibling&&e.nextElementSibling.classList.contains("validator-error"))return;const t=document.createElement("div");t.textContent="Введенное значение не корректно",t.classList.add("validator-error"),e.insertAdjacentElement("afterend",t)}showSuccess(e){e.classList.remove("error"),e.classList.add("success"),e.nextElementSibling&&e.nextElementSibling.classList.contains("validator-error")&&e.nextElementSibling.remove()}applyStyle(){const e=document.createElement("style");e.textContent="\n            input.success {\n                border: 2px solid green\n            }\n           \n            input.error {\n                border: 2px solid red!important\n            }\n            .validator-error {\n                font-size: 12px;\n                color: red;\n            }\n\n        ",document.head.appendChild(e)}setPattern(){this.pattern.phone||(this.pattern.phone=/^((8|\+7)[\- ]?)?(\(?\d{3,4}\)?[\- ]?)?[\d\- ]{5,10}$/),this.pattern.email||(this.pattern.email=/.+@.+\..+/i)}}(()=>{const e=document.createElement("div"),t=document.createElement("img");let n={};e.style.cssText="font-size: 4rem;";document.addEventListener("submit",r=>{r.preventDefault();const o=r.target;if(o.querySelector(".phone-user")&&o.querySelector(".phone-user").matches(".error"))return;if(o.querySelector(".user-name")&&o.querySelector(".user-name").matches(".error"))return;if(o.querySelector("#question")&&o.querySelector("#question").matches(".error"))return;o.appendChild(e),e.appendChild(t).style.display="none",new FormData(o).forEach((e,t)=>{n[t]=e}),t.style.display="inline-block",t.src="./img/1.gif";(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"aplication/json"},body:JSON.stringify(e)}))(n).then(n=>{if(!n.ok)throw new Error(n.textContent);t.style.display="none",e.textContent="Ваша заявка получена"}).catch(t=>e.textContent="Что то пошло не так")})})(),r("#phone_3"),r("#phone_2"),r("#phone_13"),new o({selector:".main-form",pattern:{},method:{phone_3:[["notEmpty"],["pattern","phone"]]}}).init(),new o({selector:"#sectionForm",pattern:{youName:/^[А-ЯЁа-яё]*$/},method:{phone_2:[["notEmpty"],["pattern","phone"]],name_2:[["notEmpty"],["pattern","youName"]]}}).init(),new o({selector:".director-form",pattern:{youMessage:/^[А-ЯЁа-яё]*$/},method:{question:[["notEmpty"],["pattern","youMessage"]]}}).init(),new o({selector:".popup-call",pattern:{youName:/^[А-ЯЁа-яё]*$/},method:{phone_1:[["notEmpty"],["pattern","phone"]],name_1:[["notEmpty"],["pattern","youName"]]}}).init()}]);